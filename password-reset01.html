<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 사파리폰트적용 (프리텐다드) -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/variable/pretendardvariable.css" />
    
    <title>Acts29비전빌리지 / 비밀번호 찾기</title>

    <!--Jqurey CDN-->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>

    <!-- 공통 css -->
    <link rel="stylesheet" href="css/sub-header.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/common.css">

    <!-- 해당html css -->
    <link rel="stylesheet" href="css/pw01.css">

</head>
<body>
    <section id="home">
        <header id="header" class="header">
            <div class="inner">
                <div class="content">
                    <h1 class="logo">
                        <img src="img/offcanvas-logo.png" alt="Acts29비전빌리지 / Acts29 Visionvillage" class="logo-img">
                        <span class="blind">Acts29비전빌리지 / Acts29 Visionvillage</span>
                    </h1>

                    <div class="pc_display">
                        <nav id="nav" class="nav">
                            <ul class="gnb">
                                <li class="gnb-item">
                                    <a href="#">홈</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">공지</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">소개</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">채플</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">예배</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">예약</a>
                                </li>
                                <li class="gnb-item gnb-training">
                                    <a href="#">교육</a>

                                    <ul class="gnb-sub">
                                        <li class="gnb-sub-item">
                                            <a href="#">TP</a>
                                        </li>
                                        <li class="gnb-sub-item">
                                            <a href="#">OSUM</a>
                                        </li>
                                        <li class="gnb-sub-item">
                                            <a href="#">H2H</a>
                                        </li>
                                        <li class="gnb-sub-item">
                                            <a href="#">H2K</a>
                                        </li>
                                        <li class="gnb-sub-item">
                                            <a href="#">H2R</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">도서관</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">문의</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <div class="pc_display">
                        <div class="login-link">
                            <a href="#" class="login">로그인</a>
                            <div class="line"></div>
                            <a href="#" class="join">회원가입</a>
                        </div>
                    </div>

                    <div class="mobile_display">
                        <button type="button" class="offcanvas-open">
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>

                        <div class="offcanvas">
                            <div class="offcanvas-body">
                                <nav id="nav" class="nav-mobile">
                                    <ul class="gnb-mobile">
                                        <li class="gnb-item">
                                            <a href="#">홈</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">공지</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">소개</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">채플</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">예배</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">예약</a>
                                        </li>
                                        <li class="gnb-item gnb-training">
                                            <a href="#">
                                                교육
                                                <div class="drop-arrow">
                                                    <span class="drop-left"></span>
                                                    <span class="drop-right"></span>
                                                </div>
                                            </a>
        
                                            <ul class="gnb-sub">
                                                <li class="gnb-sub-item">
                                                    <a href="#">TP</a>
                                                </li>
                                                <li class="gnb-sub-item">
                                                    <a href="#">OSUM</a>
                                                </li>
                                                <li class="gnb-sub-item">
                                                    <a href="#">H2H</a>
                                                </li>
                                                <li class="gnb-sub-item">
                                                    <a href="#">H2K</a>
                                                </li>
                                                <li class="gnb-sub-item">
                                                    <a href="#">H2R</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">도서관</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">문의</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main id="main" class="contact">
            <div class= "inner"> 
                <!-- pw -->
                <div class="pw_wrap">
                    <h3>비밀번호 찾기</h3>
                    <form class="bg">
                        <div class="input_wrap">
                            <h4>휴대폰 인증</h4>
                            <fieldset class="input_container">
                                <div class="flex-box">
                                    <input type="tel" id="phone" name="phone" required placeholder="‘-’ 구분없이 입력" pattern="[0-9]{3}-[0-9]{3,4}-[0-9]{4}" title="010-1234-5678">
                                    <button type="button" id="sendCodeBtn" class="nextBtn numbtn">인증번호 받기</button>
                                </div>
                                <input type="text" id="code" placeholder="인증번호를 입력하세요">
                            </fieldset>
                        </div>
                        <div class="btn_wrap">
                            <button type="button" class="nextBtn" id="nextBtn" disabled>다음</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>

        <footer id="footer" class="footer">
            <div class="inner">
                <div class="content">
                    <div class="footer-logo"><img src="img/footer-logo.png" alt="Acts29비전빌리지"></div>

                    <div class="footer-info01">
                        <div class="partner-site">
                            <span class="text">협력사이트 :</span>

                            <div class="site site01">
                                <a href="https://www.onnuri.org/" target="_blank">온누리교회</a>
                            </div>
                            <div class="site site02">
                                <a href="https://www.cgntv.net/" target="_blank">CGNTV</a>
                            </div>
                            <div class="site site03">
                                <a href="https://www.duranno.com/" target="_blank">두란노해외선교회</a>
                            </div>
                            <div class="site site04">
                                <a href="https://www.2000mission.org/" target="_blank">온누리2000선</a>
                            </div>
                        </div><!-- //partner-site -->

                        <div class="support-links">
                            <div class="link">
                                <a href="#">자주하는 질문</a>
                            </div>
                            <div class="link">
                                <a href="#">사이트맵</a>
                            </div>
                            <div class="link">
                                <a href="#">이용약관</a>
                            </div>
                            <div class="link">
                                <a href="#">아동 및 성인 보호 정책</a>
                            </div>
                            <div class="link">
                                <a href="#">개인정보처리방침</a>
                            </div>
                        </div><!-- //support-links -->
                    </div><!-- //footer-info01 -->

                    <div class="line"></div>

                    <div class="footer-info02">
                        <div class="company-info">
                            <div class="info info01"><span>TEL</span>031-331-8100</div>
                            <div class="info info01"><span>FAX</span>031-331-8189</div>
                            <div class="info"><span>E-MAIL</span>school@visionvillage.org</div>
                            <div class="info">경기도 용인시 처인구 양지면 추계로 62</div>
                        </div>

                        <div class="copyright">Copyright © 2024 Acts29비전빌리지/Acts29Visionvillage Allright reserved</div>
                    </div>
                </div>
            </div>
        </footer>
    </section>

    <script src="js/script.js"></script>
 
    <script>
        // 1. 전화번호 포맷
        document.getElementById('phone').addEventListener('input', function(event) {
            let phone = event.target.value;
            phone = phone.replace(/[^\d]/g, ''); // 숫자만 남기고 다른 문자는 제거

            // 전화번호 포맷: 010-1234-5678
            if (phone.length <= 3) {
                phone = phone.replace(/(\d{1,3})/, '$1');
            } else if (phone.length <= 7) {
                phone = phone.replace(/(\d{3})(\d{1,4})/, '$1-$2');
            } else {
                phone = phone.replace(/(\d{3})(\d{4})(\d{1,4})/, '$1-$2-$3');
            }

            event.target.value = phone;
        });


        // 2. 인증번호 받기
        // 변수 초기화
        let countdown;
        let timeLeft = 180; // 3분 (180초)
        const sendCodeBtn = document.getElementById("sendCodeBtn");

        // 인증번호 받기 버튼 클릭 시
        sendCodeBtn.addEventListener("click", function() {
            // 인증번호 전송 로직을 여기에 추가 (예: AJAX 요청으로 인증번호 발송)
            alert("인증번호가 전송되었습니다."); // 실제 인증번호 발송 대신 알림창을 띄웁니다.

            // 버튼 비활성화하고 카운트다운 시작
            sendCodeBtn.disabled = true;
            sendCodeBtn.textContent = `남은 시간 : ${timeLeft}초`;

            // 카운트다운 함수
            countdown = setInterval(function() {
                timeLeft--;
                sendCodeBtn.textContent = `남은 시간 : ${timeLeft}초`;
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    sendCodeBtn.disabled = false;
                    sendCodeBtn.textContent = "인증번호 받기";
                    timeLeft = 180; // 카운트다운 초기화
                }
            }, 1000); // 1초 간격으로 카운트다운
        });     
        
        // 모든 input값 입력후 버튼 클릭시 활성화
        const phoneInput = document.getElementById('phone');
        const codeInput = document.getElementById('code');
        const nextBtn = document.getElementById('nextBtn');

        function toggleNextButton() {
            if (phoneInput.value.trim() !== '' && codeInput.value.trim() !== '') {
                nextBtn.disabled = false;
            } else {
                nextBtn.disabled = true;
            }
        }

        function handleNextButtonClick() {
            if (!nextBtn.disabled) {
                window.location.href = 'https://puritechlab1155.github.io/onnuri-front/password-reset02.html';
            }
        }

        phoneInput.addEventListener('input', toggleNextButton);
        codeInput.addEventListener('input', toggleNextButton);
        nextBtn.addEventListener('click', handleNextButtonClick);
       
    </script>
</body>
</html>