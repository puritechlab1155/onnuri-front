<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 사파리폰트적용 (프리텐다드) -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/variable/pretendardvariable.css" />
    
    <title>Acts29비전빌리지 / 4단계</title>

    <!--Jqurey CDN-->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>

    <!-- 공통css -->
    <link rel="stylesheet" href="css/sub-header.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/common02.css">

    <!-- 해당html 연결css -->
    <link rel="stylesheet" href="css/form04.css">
</head>
<body>
    <section id="home">
        <header id="header" class="header">
            <div class="inner">
                <div class="content">
                    <h1 class="logo">
                        <img src="img/offcanvas-logo.png" alt="Acts29비전빌리지 / Acts29 Visionvillage" class="logo-img">
                        <span class="blind">Acts29비전빌리지 / Acts29 Visionvillage</span>
                    </h1>

                    <div class="pc_display">
                        <nav id="nav" class="nav">
                            <ul class="gnb">
                                <li class="gnb-item">
                                    <a href="#">홈</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">공지</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">소개</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">채플</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">예배</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">예약</a>
                                </li>
                                <li class="gnb-item gnb-training">
                                    <a href="#">교육</a>

                                    <ul class="gnb-sub">
                                        <li class="gnb-sub-item">
                                            <a href="#">TP</a>
                                        </li>
                                        <li class="gnb-sub-item">
                                            <a href="#">OSUM</a>
                                        </li>
                                        <li class="gnb-sub-item">
                                            <a href="#">H2H</a>
                                        </li>
                                        <li class="gnb-sub-item">
                                            <a href="#">H2K</a>
                                        </li>
                                        <li class="gnb-sub-item">
                                            <a href="#">H2R</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">도서관</a>
                                </li>
                                <li class="gnb-item">
                                    <a href="#">문의</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <div class="pc_display">
                        <div class="login-link">
                            <a href="#" class="login">로그인</a>
                            <div class="line"></div>
                            <a href="#" class="join">회원가입</a>
                        </div>
                    </div>

                    <div class="mobile_display">
                        <button type="button" class="offcanvas-open">
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>

                        <div class="offcanvas">
                            <div class="offcanvas-body">
                                <nav id="nav" class="nav-mobile">
                                    <ul class="gnb-mobile">
                                        <li class="gnb-item">
                                            <a href="#">홈</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">공지</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">소개</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">채플</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">예배</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">예약</a>
                                        </li>
                                        <li class="gnb-item gnb-training">
                                            <a href="#">
                                                교육
                                                <div class="drop-arrow">
                                                    <span class="drop-left"></span>
                                                    <span class="drop-right"></span>
                                                </div>
                                            </a>
        
                                            <ul class="gnb-sub">
                                                <li class="gnb-sub-item">
                                                    <a href="#">TP</a>
                                                </li>
                                                <li class="gnb-sub-item">
                                                    <a href="#">OSUM</a>
                                                </li>
                                                <li class="gnb-sub-item">
                                                    <a href="#">H2H</a>
                                                </li>
                                                <li class="gnb-sub-item">
                                                    <a href="#">H2K</a>
                                                </li>
                                                <li class="gnb-sub-item">
                                                    <a href="#">H2R</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">도서관</a>
                                        </li>
                                        <li class="gnb-item">
                                            <a href="#">문의</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main id="main" class="form mt-120 inner">
            <div class="containner">
                <!-- 상단 부분 -->
                <div class="text-box">
                    <h2 class="title">훈련신청</h2>
                        <details open>
                            <summary>
                                선교사 지원신청
                                <span class="toggle-icon"></span>
                            </summary>
                            <div class="text-wrap">
                                <p>이 지원서는 단기/장기 선교후보지원자가 <span class="br"></span>선교사로서 스스로를 진단하고, <br>면접 인사위원회가 지원자를 이해하기 위한 <span class="br"></span>목적 외 다른 용도로 사용치 않으며,<br> 개인 정보에 대해 절대적으로<span class="br"></span> 비밀을 보장하오니,<br> 성실하고 정직하게 기술하신 후 <span class="br"></span> 제출하여 주시기 바랍니다.</p>
                                <ul>
                                    <h4>작성 요령</h4>
                                    <li>1. 모든 질문에 대해 기도하는 마음으로 <span class="br"></span>성실하고 상세하게 답변하여 주십시오.</li>
                                    <li>2. 지원서 제출 시 반명함(3X4cm)사이즈의 <span class="br"></span>증명사진 파일을 첨부하여 주십시오.</li>
                                    <li>3. 간증문은 구체적으로(A4용지 1장 이상) <span class="br"></span>기술하여 주십시오.(OSOM/TP 지원자만 해당)</li>
                                    <li>4. 기타 문의는 행정 담당에게 연락 주십시오.</li>
                                </ul>
    
                            </div>
                        </details>
                </div>
                <!-- 탭 부분( 단계별 focus-step 수정필요**** ) -->
                <div class="step-tab">
                    <ul>
                        <li class="stepNumb">1</li>
                        <li class="stepKo">단계</li>
                    </ul>
                    <ul>
                        <li class="stepNumb">2</li>
                        <li class="stepKo">단계</li>
                    </ul>
                    <ul>
                        <li class="stepNumb">3</li>
                        <li class="stepKo">단계</li>
                    </ul>
                    <ul class="focus-step">
                        <li>4</li>
                        <li>단계</li>
                    </ul>
                    <ul>
                        <li class="stepNumb">5</li>
                        <li class="stepKo">단계</li>
                    </ul>
                    <ul>
                        <li class="stepNumb">6</li>
                        <li class="stepKo">단계</li>
                    </ul>
                    <ul>
                        <li class="stepNumb">7</li>
                        <li class="stepKo">단계</li>
                    </ul>
                    <ul>
                        <li class="stepNumb">8</li>
                        <li class="stepKo">단계</li>
                    </ul>
                    <ul>
                        <li class="stepNumb">9</li>
                        <li class="stepKo">단계</li>
                    </ul>
                </div>

                <form id="form04">
                    <!-- 단계 신청서  -->
                    <fieldset>
                        <legend class="step">4. 가족관련</legend>
                        <div class="input-wrap"> 
                            <!-- 타이틀 및 작성칸 추가 버튼 -->
                            <h4 class="list-title">
                                <span>가족 사항</span>
                                <button class="add-field">
                                    <span>작성칸 추가</span> <img src="img/form/add-field.png" alt="작성칸 추가 아이콘">
                                </button>
                            </h4>
                            <!--목록 타이틀-->
                            <ul class="item-title">
                                <li class="item01 item">관계</li>
                                <li class="item02 item">성명</li>
                                <li class="item03 item">생년월일</li>
                                <li class="item04 item">최종학력</li>
                                <li class="item05 item">직업</li>
                                <li class="item06 item">종교</li>
                                <li class="item07 item">출석교회</li>
                                <li class="item08 item">직분</li>
                                <li class="item09 item">동반<span class="br">입소</span></li>
                                <li class="item10 item">삭제</li>
                            </ul>
                            <!-- 첫번 째 줄 -->
                            <div class="list_box">
                                <!-- 목록 -->
                                <div class="input-container">
                                    <label for="relation" class="list item01 border_b b_none_r">
                                        <span>관계</span>
                                        <input id="relation" type="text" placeholder=" - " required>
                                    </label>
                                    
                                    <label for="name" class="list item02 border_b">
                                        <span>성명</span>
                                        <input id="name" type="text" placeholder=" - " required>
                                    </label>
                                    
                                    <label for="birthdate" class="list item03 border_b">
                                        <span>생년월일</span>
                                        <div class="calendar-wrap">
                                            <svg width="21" height="22" viewBox="0 0 21 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect x="1.33398" y="2.5" width="18" height="18" rx="5" stroke="#1E7196" stroke-width="1.5"/>
                                                <path d="M1.33398 7.5H19.334" stroke="#1E7196" stroke-width="1.5" stroke-linejoin="round"/>
                                                <path d="M14.834 1L14.834 4" stroke="#1E7196" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M5.83398 1L5.83398 4" stroke="#1E7196" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M4.83398 11.5H5.83398" stroke="#1E7196" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M9.83398 11.5H10.834" stroke="#1E7196" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M14.834 11.5H15.834" stroke="#1E7196" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M4.83398 15.5H5.83398" stroke="#1E7196" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M9.83398 15.5H10.834" stroke="#1E7196" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M14.834 15.5H15.834" stroke="#1E7196" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            <input id="birthdate" type="date" required>
                                        </div>
                                    </label>
                                    
                                    <label for="educate" class="list item04 border_b">
                                        <span>최종학력</span>
                                        <input id="educate" type="text" placeholder=" - " required>
                                    </label>
                                    
                                    <label for="job" class="list item05 border_b">
                                        <span>직업</span>
                                        <input id="job" type="text" placeholder=" - ">
                                    </label>
                                    
                                    <label for="religion" class="list item06 border_b b_none_r">
                                        <span>종교</span>
                                        <input id="religion" type="text" placeholder=" - " required>
                                    </label>
                                    
                                    <label for="church" class="list item07 border_b">
                                        <span>출석교회</span>
                                        <input id="church" type="text" placeholder=" - " required>
                                    </label>
                                    
                                    <label for="position" class="list item08 border_b b_none_r">
                                        <span>직분</span>
                                        <input id="position" type="text" placeholder=" - " required>
                                    </label>
                                    
                                    <label for="admission" class="list item09 border_b">
                                        <span>동반입소</span>
                                        <div class="checkBox-wrap">
                                            <span class="checkBox">
                                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <rect width="20" height="20" rx="4" fill="#d3d3d3"></rect>
                                                    <path d="M6 9.4L9 13L14 7" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                                </svg>
                                            </span>
                                            <input id="admission" type="checkbox" required style="display: none;">
                                        </div>
                                    </label>
                                    <!-- 삭제 버튼 -->
                                    <span class="list item10 border_b">
                                        <button class="n-delete">
                                            <span>삭제</span>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <!-- ~ 작성칸 추가 시 추가됨 -->
                        </div>
                    </fieldset>
                </form>
                <!-- 확인 버튼  -->
                <div class="next-container">
                    <button class="next" type="button" id="submit-btn" disabled>확인</button>
                </div>
            </div>
        </main>

        <footer id="footer" class="footer">
            <div class="inner">
                <div class="content">
                    <div class="footer-logo"><img src="img/footer-logo.png" alt="Acts29비전빌리지"></div>

                    <div class="footer-info01">
                        <div class="partner-site">
                            <span class="text">협력사이트 :</span>

                            <div class="site site01">
                                <a href="https://www.onnuri.org/" target="_blank">온누리교회</a>
                            </div>
                            <div class="site site02">
                                <a href="https://www.cgntv.net/" target="_blank">CGNTV</a>
                            </div>
                            <div class="site site03">
                                <a href="https://www.duranno.com/" target="_blank">두란노해외선교회</a>
                            </div>
                            <div class="site site04">
                                <a href="https://www.2000mission.org/" target="_blank">온누리2000선</a>
                            </div>
                        </div><!-- //partner-site -->

                        <div class="support-links">
                            <div class="link">
                                <a href="#">자주하는 질문</a>
                            </div>
                            <div class="link">
                                <a href="#">사이트맵</a>
                            </div>
                            <div class="link">
                                <a href="#">이용약관</a>
                            </div>
                            <div class="link">
                                <a href="#">아동 및 성인 보호 정책</a>
                            </div>
                            <div class="link">
                                <a href="#">개인정보처리방침</a>
                            </div>
                        </div><!-- //support-links -->
                    </div>
                    <div class="line"></div>

                    <div class="footer-info02">
                        <div class="company-info">
                            <div class="info info01"><span>TEL</span>031-331-8100</div>
                            <div class="info info01"><span>FAX</span>031-331-8189</div>
                            <div class="info"><span>E-MAIL</span>school@visionvillage.org</div>
                            <div class="info">경기도 용인시 처인구 양지면 추계로 62</div>
                        </div>

                        <div class="copyright">Copyright © 2024 Acts29비전빌리지/Acts29Visionvillage Allright reserved</div>
                    </div>
                </div>
            </div>
        </footer>
    </section>
    <script src="js/script.js"></script>
    <script>
        $(document).ready(function() {
            // -- 체크박스 아이콘 클릭 --
            $(document).on('click', '.checkBox', function() {
                let $rect = $(this).find('svg > rect');
                let $input = $(this).closest('label').find('input[type="checkbox"]'); // 체크박스 찾기
                let rectColor = $rect.css('fill');

                // 체크박스 상태 토글
                $input.prop('checked', !$input.prop('checked'));

                if (rectColor === 'rgb(211, 211, 211)') { // '#d3d3d3'의 RGB 값
                    $rect.css({ fill: '#0A387C' }); 
                } else {
                    $rect.css({ fill: '#d3d3d3' });
                }
            });

            // --- 폼태그 안의 입력이 모두 채워지면 확인버튼이 활성화되고 다음 페이지로 넘어가게 설정
            const form = document.getElementById('form04');
            const submitBtn = document.getElementById('submit-btn');

            const getAllInputs = () => form.querySelectorAll('input[required], .list_box input');

            function checkFormCompletion() {
                const inputs = getAllInputs(); 
                const allFilled = Array.from(inputs).every(input => input.value.trim() !== '');
                submitBtn.disabled = !allFilled; 
            }

            // 초기 입력 필드에 이벤트 리스너 추가
            const inputs = getAllInputs(); 
            inputs.forEach(input => {
                input.addEventListener('input', checkFormCompletion);
            });

            // 확인 버튼 클릭 시 페이지 이동
            submitBtn.addEventListener('click', function () {
                if (!submitBtn.disabled) {
                    window.location.href = 'https://puritechlab1155.github.io/onnuri-front/form05.html';
                }
            });

            // 페이지 로드 시 초기 상태 체크
            checkFormCompletion(); 

            // -- 작성칸 추가 버튼 --
            let $addField = $('.add-field');
            let counter = 1; // 카운터 초기화

            $addField.on('click', function(e) {
                e.preventDefault();
                
                // 첫 번째 .list_box 복제
                var newField = $('.list_box').first().clone(); 
                
                // 복제된 필드의 모든 입력값 리셋
                newField.find('input').val(''); 
                newField.find('textarea').val(''); 

                // 삭제 버튼 클래스 변경
                newField.find('.n-delete').removeClass('n-delete').addClass('delete'); 

                // label의 for 값과 input의 id 값을 수정
                newField.find('label').each(function() {
                    var inputFor = $(this).attr('for');
                    if (inputFor) {
                        $(this).attr('for', `${inputFor}-${counter}`);
                    }
                });

                newField.find('input').each(function() {
                    var inputId = $(this).attr('id');
                    if (inputId) {
                        $(this).attr('id', `${inputId}-${counter}`);
                    }
                });

                // 새로운 필드를 현재 위치에 추가
                $(this).closest('.input-wrap').append(newField);

                // 윈도우의 너비 확인 후 스타일 설정
                setStyles(newField);

                // 새로 추가된 입력 필드에 이벤트 리스너 추가 >> 버튼 활성화 안되는 오류 *******************************
                newField.find('input[required]').on('input', function() {
                    checkFormCompletion(); // 새 입력 필드 체크
                });

                counter++; // 카운터 증가
            });

            // 스타일 설정 함수
            function setStyles(element) {
                const windowWidth = window.innerWidth;

                if (windowWidth >= 1121) {
                    element.css({'border-top': 'none', 'padding-top': ''});
                    element.find('label, .item10').css({'border-top': 'none'});
                } else {
                    element.css({'border-top': '', 'padding-top': '40px'});
                    element.find('label, .item10').css({'border-top': ''});
                }
            }

            // 윈도우 리사이즈 이벤트 핸들러
            window.addEventListener('resize', function() {
                const newFields = $('.list_box').not(':first-child');
                newFields.each(function() {
                    setStyles($(this));
                });
            });

            // -- 삭제 버튼 클릭 시 해당 부모 박스 삭제
            $(document).on('click', '.delete', function(e) {
                e.preventDefault();
                $(this).closest('.list_box').remove();
                checkFormCompletion(); // 삭제 시 입력 상태 체크
            });
        });
    </script>
</body>
</html>